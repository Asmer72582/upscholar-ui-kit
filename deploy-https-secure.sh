#!/bin/bash
# HTTPS SECURE DEPLOYMENT SCRIPT
# Now using https://api.upscholar.in for all API calls

echo "üöÄ HTTPS SECURE DEPLOYMENT"
echo "==========================="
echo ""

echo "‚úÖ Frontend rebuilt with HTTPS configuration!"
echo ""
echo "üìã WHAT'S CHANGED:"
echo "1. ‚úÖ Now using https://api.upscholar.in for API calls"
echo "2. ‚úÖ Secure WebSocket connections (wss://api.upscholar.in)"
echo "3. ‚úÖ No more mixed content errors"
echo "4. ‚úÖ Full HTTPS security"
echo ""

echo "üîç BACKEND STATUS:"
echo "=================="
echo "Testing backend endpoints..."
echo ""

echo "Testing HTTPS connectivity:"
curl -s -o /dev/null -w "%{http_code}" https://api.upscholar.in/ || echo "Connection failed"
echo ""

echo "üìÅ DEPLOYMENT INSTRUCTIONS:"
echo "============================"
echo ""
echo "Step 1: Upload the 'dist' folder to GoDaddy"
echo "Step 2: Replace your current frontend files"
echo "Step 3: Clear browser cache"
echo "Step 4: Test the login at https://upscholar.in/auth"
echo ""

echo "üéØ EXPECTED RESULTS:"
echo "===================="
echo "‚Ä¢ No more mixed content errors"
echo "‚Ä¢ Secure HTTPS connections"
echo "‚Ä¢ Login will work properly"
echo "‚Ä¢ No 'Not Secure' warnings"
echo ""

echo "üîß VERIFICATION COMMANDS:"
echo "=========================="
echo ""
echo "Test your frontend:"
echo "curl -I https://upscholar.in/auth"
echo ""
echo "Test API endpoint:"
echo "curl -X POST https://api.upscholar.in/api/auth/login \\"
echo "  -H 'Content-Type: application/json' \\"
echo "  -d '{\"email\":\"test@test.com\",\"password\":\"test\"}'"
echo ""

echo "üì¶ DEPLOYMENT FILES READY:"
echo "=========================="
ls -la dist/
echo ""
echo "Total size: $(du -sh dist/ | cut -f1)"
echo "Files: $(find dist/ -type f | wc -l)"
echo ""
echo "‚ú® Ready to deploy! Upload the 'dist' folder to your GoDaddy hosting."
echo ""
echo "üéâ This should completely resolve your mixed content error!"